function snowflake(a){var b=$("body").width()+200,c=$("body").height()+200,d=random(15,45),e=5e3*(7-d/10+random(.5,1)),f=Math.floor(Math.random()*(b-d)),g=-1*d;$("body").append('<img src="'+getSnowflateURL(d,a)+'" style="width:'+d+"px;height:"+d+"px;margin-top:"+g+"px;margin-left:"+f+'px;" class="snowflake start">'),animateLatestSnowflakes(c,e)}function animateLatestSnowflakes(a,b){$("img.start").removeClass("start").animate({"margin-top":a},b,function(){$(this).fadeOut(function(){$(this).remove()})}).animateRotate(random(0,1)>.5?random(0,250):random(0,-250),b,"linear",function(){})}function getSnowflateURL(a,b){var c=$('<canvas width="'+a+'" height="'+a+'">Canvas not supported.</canvas>').appendTo("body").get(0),d=c.getContext("2d"),e=getDrawPattern(a/2);drawSnowflake(e,b,[a/2,a/2],"blue",d);var f=c.toDataURL();return $(c).remove(),f}function getDrawPattern(a){return[[0,0],[.283*a,random(0,a/20)],[.17*a,random(0,a/6)],[.22*a,random(0,a/4)],[.33*a,0],[.45*a,random(0,a/12)],[.5*a,random(a/24,a/6)],[.5*a,random(0,a/12)],[.67*a,0],[.75*a,random(0,a/12)],[.83*a,random(a/12,a/6)],[.92*a,random(0,a/12)],[1*a,0]]}function drawSnowflake(a,b,c,d,e){var f=360/b,g=radiansOf(f);e.translate(c[0],c[1]),e.strokeStyle=d,e.lineWidth=1,e.beginPath(),e.rotate(random(0,g));for(var h=0;360>h;h+=f)e.rotate(g),e.moveTo(a[0][0],a[0][1]),drawPattern(a,1,e),drawPattern(a,-1,e);e.stroke()}function drawPattern(a,b,c){for(var d=0;d<a.length;d++)c.lineTo(a[d][0],b*a[d][1])}function radiansOf(a){return Math.PI/180*a}function random(a,b){return Math.random()*b+a}$(function(){var a=6;if(Modernizr.canvas){setInterval(function(){a()},1e3)}else alert("Please use a browser that supports the canvas element to view this project.")});